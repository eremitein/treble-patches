From a3fa879c2dd58a255aafcc6cd18860f9bead3954 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Wed, 30 Sep 2020 01:39:40 -0400
Subject: [PATCH 20/57] Revert "FODCircleView: Make FOD icon dimming optional"

This reverts commit 8e93732d709d9d8822150c251b6113cd133f4c29.
---
 core/res/res/values/cr_config.xml                            | 3 ---
 core/res/res/values/cr_symbols.xml                           | 3 ---
 .../src/com/android/systemui/biometrics/FODCircleView.java   | 5 +----
 3 files changed, 1 insertion(+), 10 deletions(-)

diff --git a/core/res/res/values/cr_config.xml b/core/res/res/values/cr_config.xml
index 42d14636dab..48952601fa7 100644
--- a/core/res/res/values/cr_config.xml
+++ b/core/res/res/values/cr_config.xml
@@ -69,9 +69,6 @@
          timing(the duration which the vibrator is expected to vibrate for). -->
     <bool name="config_hasOnePlusHapticMotor">false</bool>
 
-    <!-- FOD -->
-    <bool name="config_targetUsesInKernelDimming">true</bool>
-
     <!-- Whether device has physical tri state switch -->
     <bool name="config_hasAlertSlider">false</bool>
     
diff --git a/core/res/res/values/cr_symbols.xml b/core/res/res/values/cr_symbols.xml
index 9152c36cfd1..71c7e3cfb10 100644
--- a/core/res/res/values/cr_symbols.xml
+++ b/core/res/res/values/cr_symbols.xml
@@ -165,9 +165,6 @@
   <!-- Device has OnePlus haptic motor -->
   <java-symbol type="bool" name="config_hasOnePlusHapticMotor" />
 
-  <!-- FOD -->
-  <java-symbol type="bool" name="config_targetUsesInKernelDimming" />
-
   <!-- Whether device has physical tri state switch -->
   <java-symbol type="bool" name="config_hasAlertSlider" />
 
diff --git a/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java b/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java
index 8788951b2e5..e6c9d9ff3d0 100644
--- a/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java
+++ b/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java
@@ -101,7 +101,6 @@ public class FODCircleView extends ImageView implements ConfigurationListener, T
     private final int mDreamingMaxOffset;
     private final int mNavigationBarSize;
     private final boolean mShouldBoostBrightness;
-    private final boolean mTargetUsesInKernelDimming;
     private final Paint mPaintFingerprintBackground = new Paint();
     private final Paint mPaintFingerprint = new Paint();
     private final Paint mPaintIcon = new Paint();
@@ -246,8 +245,6 @@ public class FODCircleView extends ImageView implements ConfigurationListener, T
         mPaintFingerprintBackground.setColor(res.getColor(R.color.config_fodColorBackground));
         mPaintFingerprintBackground.setAntiAlias(true);
 
-        mTargetUsesInKernelDimming = res.getBoolean(com.android.internal.R.bool.config_targetUsesInKernelDimming);
-
         mWindowManager = context.getSystemService(WindowManager.class);
 
         mNavigationBarSize = res.getDimensionPixelSize(R.dimen.navigation_bar_size);
@@ -377,7 +374,7 @@ public class FODCircleView extends ImageView implements ConfigurationListener, T
     }
 
     public void updateIconDim() {
-        if (!mIsCircleShowing && mTargetUsesInKernelDimming) {
+        if (!mIsCircleShowing) {
             setColorFilter(Color.argb(getDimAlpha(), 0, 0, 0), PorterDuff.Mode.SRC_ATOP);
         } else {
             setColorFilter(Color.argb(0, 0, 0, 0), PorterDuff.Mode.SRC_ATOP);
-- 
2.17.1

